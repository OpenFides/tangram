<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11">
    <meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5,minimum-scale=0.5,user-scalable=0.5" />
    <meta charset="UTF-8">
    <title>Title</title>
 </head>
<body>
    <div>
        javascript:
    </div>
    <textarea style=" width:100% ;height:500px" rows="20" id="txtJavaScript">
       
        tg.find("bing").show();
    </textarea>
    <button onclick="exec()">ִexec</button>

    <script src="tg.js"></script>

    <script type="text/javascript">
        function exec() {
            try {
                var txtJavaScript = document.getElementById("txtJavaScript").value;
                eval(txtJavaScript);
            } catch (e) {
                alert(e);
            }
            return true;
        }

        function event_on() {
            try {
                var event = new mq();
                //event.on("message", (data) => {
                //    alert(data);                    
                //});
                event.on("message", function (data) { alert(data) });
                // event.send("aaa", "bbb", () => { });
            } catch (e) {
                alert(e);
            }
            return true;
        }
        function event_send(form) {
            try {
                var event = new mq();
                //event.on("message", (data) => { if (data.from == '') alert(data) });
                event.send(form, "message", "one message");
            } catch (e) {
                alert(e);
            }
            return true;
        }

        function socket_demo() {
            try {
                //初始化socket.io
                var socket = new io("http://10.168.4.74:20201", {
                    token: '3',
                    groupId: 1
                });
                //订阅消息
                //socket.on("message", data => {
                //    console.log(data);
                //    alert("我接收到一个消息：" + data);
                //});
                socket.on("message", function (data) { alert("我接收到一个消息：" + JSON.stringify(data)); });


                //socket.on("message", function(data){alert("我接收到一个消息：" + data);});
                //启动连接
                socket.open();
                //发送消息
                ///var data = { id: "", create_time: "1210232103", data: {}, type:"data" };
                //socket.emit("user1", data, ack => { });
                ///socket.emit("user1", data,function(ack){ });
            } catch (e) {
                alert(e);
            }
            return true;
        }
    </script>
</body>

</html>